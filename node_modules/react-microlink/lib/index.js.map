{"version":3,"file":"index.js","sources":["index.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchFromApi = exports.fetchFromApiUrl = exports.createApiUrl = exports.imageProxy = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _jsx = function () { var REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7; return function createRawReactElement(type, props, key, children) { var defaultProps = type && type.defaultProps; var childrenLength = arguments.length - 3; if (!props && childrenLength !== 0) { props = {}; } if (props && defaultProps) { for (var propName in defaultProps) { if (props[propName] === void 0) { props[propName] = defaultProps[propName]; } } } else if (!props) { props = defaultProps || {}; } if (childrenLength === 1) { props.children = children; } else if (childrenLength > 1) { var childArray = Array(childrenLength); for (var i = 0; i < childrenLength; i++) { childArray[i] = arguments[i + 3]; } props.children = childArray; } return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: key === undefined ? null : '' + key, ref: null, props: props, _owner: null }; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Card = require('./components/Card');\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Card = function Card(_ref) {\n  var image = _ref.image,\n      video = _ref.video,\n      url = _ref.url,\n      size = _ref.size,\n      autoPlay = _ref.autoPlay,\n      controls = _ref.controls,\n      muted = _ref.muted,\n      loop = _ref.loop,\n      playsInline = _ref.playsInline,\n      title = _ref.title,\n      description = _ref.description;\n  return _jsx(_react.Fragment, {}, void 0, _jsx(_Card.CardMedia, {\n    image: image,\n    video: video,\n    url: url,\n    cardSize: size,\n    autoPlay: autoPlay,\n    controls: controls,\n    muted: muted,\n    loop: loop,\n    playsInline: playsInline\n  }), _jsx(_Card.CardContent, {\n    className: 'microlink_card__content',\n    title: title,\n    description: description,\n    url: url,\n    cardSize: size\n  }));\n};\n\nvar Microlink = function (_Component) {\n  _inherits(Microlink, _Component);\n\n  function Microlink() {\n    var _ref2;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Microlink);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = Microlink.__proto__ || Object.getPrototypeOf(Microlink)).call.apply(_ref2, [this].concat(args))), _this), _this.state = { loading: true }, _this.setData = function (data) {\n      var imagesProps = [].concat(_this.props.image);\n      var image = (0, _utils.someProp)(data, imagesProps);\n      var imageUrl = (0, _utils.getUrlPath)(image);\n      var title = data.title,\n          description = data.description,\n          url = data.url,\n          video = data.video;\n\n      var _ref3 = image || {},\n          color = _ref3.color,\n          backgroundColor = _ref3.background_color;\n\n      _this.setState({\n        color: color,\n        backgroundColor: backgroundColor,\n        title: title,\n        description: description,\n        url: url,\n        loading: false,\n        video: video,\n        image: imageUrl\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Microlink, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _props = this.props,\n          customData = _props.data,\n          noFetch = _props.noFetch,\n          url = _props.url;\n\n      var promise = noFetch || !url ? Promise.resolve({}) : (0, _utils.fetchFromApi)(this.props);\n      promise.then(function (_ref4) {\n        var data = _ref4.data;\n        return _this2.setData(_extends({}, data, customData));\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.data !== this.props.data) this.setData(this.props.data);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state = this.state,\n          title = _state.title,\n          color = _state.color,\n          backgroundColor = _state.backgroundColor,\n          url = _state.url,\n          loadingState = _state.loading,\n          description = _state.description,\n          image = _state.image,\n          video = _state.video;\n\n      var _props2 = this.props,\n          autoPlay = _props2.autoPlay,\n          controls = _props2.controls,\n          loop = _props2.loop,\n          muted = _props2.muted,\n          playsInline = _props2.playsInline,\n          className = _props2.className,\n          size = _props2.size,\n          loadingProp = _props2.loading,\n          props = _objectWithoutProperties(_props2, ['autoPlay', 'controls', 'loop', 'muted', 'playsInline', 'className', 'size', 'loading']);\n\n      var loading = (0, _utils.isNil)(loadingProp) ? loadingState : loadingProp;\n\n      return _react2.default.createElement(\n        _Card.CardWrap,\n        _extends({\n          className: className ? 'microlink_card ' + className : 'microlink_card',\n          href: url,\n          title: title,\n          cardSize: size,\n          color: color,\n          backgroundColor: backgroundColor,\n          loading: loading\n        }, props),\n        loading ? _jsx(_Card.CardEmpty, {\n          cardSize: size\n        }) : _jsx(Card, {\n          title: title,\n          description: description,\n          url: url,\n          image: image,\n          video: video,\n          autoPlay: autoPlay,\n          controls: controls,\n          loop: loop,\n          muted: muted,\n          playsInline: playsInline,\n          size: size\n        })\n      );\n    }\n  }]);\n\n  return Microlink;\n}(_react.Component);\n\nMicrolink.defaultProps = _extends({\n  apiKey: undefined,\n  autoPlay: true,\n  controls: true,\n  image: ['screenshot', 'image', 'logo'],\n  loop: true,\n  muted: true,\n  playsInline: true,\n  reverse: false,\n  size: 'normal'\n}, _utils.defaultApiParameters);\n\nexports.imageProxy = _utils.imageProxy;\nexports.createApiUrl = _utils.createApiUrl;\nexports.fetchFromApiUrl = _utils.fetchFromApiUrl;\nexports.fetchFromApi = _utils.fetchFromApi;\nexports.default = Microlink;"],"names":["Object","defineProperty","exports","value","fetchFromApi","fetchFromApiUrl","createApiUrl","imageProxy","undefined","REACT_ELEMENT_TYPE","obj","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_jsx","Symbol","for","type","children","defaultProps","childrenLength","propName","childArray","Array","$$typeof","ref","_owner","_react","require","_react2","__esModule","default","_Card","_utils","_possibleConstructorReturn","self","ReferenceError","Card","_ref","url","size","title","description","Fragment","CardMedia","image","video","cardSize","autoPlay","controls","muted","loop","playsInline","CardContent","className","Microlink","_Component","_ref2","_temp","_this","instance","TypeError","_classCallCheck","this","_len","args","_key","__proto__","getPrototypeOf","apply","concat","state","loading","setData","data","imagesProps","someProp","imageUrl","getUrlPath","_ref3","setState","color","backgroundColor","background_color","subClass","superClass","create","constructor","setPrototypeOf","_inherits","Component","_this2","_props","customData","noFetch","Promise","resolve","then","_ref4","prevProps","_state","loadingState","_props2","loadingProp","keys","indexOf","_objectWithoutProperties","isNil","createElement","CardWrap","href","CardEmpty","apiKey","reverse","defaultApiParameters"],"mappings":"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"}