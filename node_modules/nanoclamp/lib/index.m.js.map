{"version":3,"file":"index.m.js","sources":["index.js"],"sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:!0});var e=Object.assign||function(e){for(var t=arguments,i=1;i<arguments.length;i++){var n=t[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),i=require(\"react\");var n=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={noClamp:!1,text:\".\"},t.element=null,t.original=e.text,t.lineHeight=0,t.start=0,t.middle=0,t.end=0,t.debounced=t.debounce(t.action),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Component),t(r,[{key:\"componentDidMount\",value:function(){window.addEventListener(\"resize\",this.debounced),this.props.text&&(this.lineHeight=this.element.clientHeight+1,this.clampLines())}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this.debounced)}},{key:\"debounce\",value:function(e){var t=this,i=void 0,n=function(){i=null,e.apply(t)};return function(){var r=!i;clearTimeout(i),i=setTimeout(n,t.props.debounce),r&&e.apply(t)}}},{key:\"action\",value:function(){this.original&&this.setState({noClamp:!1},this.clampLines)}},{key:\"clampLines\",value:function(){var e=this,t=this.props,i=t.ellipsis,n=this.lineHeight*t.lines+1,o=i===r.defaultProps.ellipsis?5:1.2*i.length;for(this.start=0,this.middle=0,this.end=this.original.length;this.start<=this.end;){if(this.middle=Math.floor((this.start+this.end)/2),this.element.innerText=this.original.slice(0,this.middle),this.middle===this.original.length)return void this.setState({text:this.original,noClamp:!0});this.moveMarkers(n)}var s=this.original.slice(0,Math.max(this.middle-o,0)).trim()+i;this.setState({text:s},function(){e.element.innerText=e.state.text})}},{key:\"moveMarkers\",value:function(e){this.element.clientHeight<=e?this.start=this.middle+1:this.end=this.middle-1}},{key:\"render\",value:function(){var t=this,n=this.state.text,r=this.props,o=r.accessibility,s=r.is,l=r.text,a=function(e,t){var i={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}(r,[\"accessibility\",\"is\",\"text\",\"lines\",\"debounce\",\"ellipsis\"]),u=e({ref:function(e){return t.element=e}},o?{title:l}:{},a);return l?(0,i.createElement)(s,u,n):null}}]),r}();n.defaultProps={accessibility:!0,is:\"div\",lines:3,ellipsis:\"â€¦\",debounce:300},exports.default=n;\n//# sourceMappingURL=index.js.map\n"],"names":["Object","defineProperty","exports","value","e","assign","t","arguments","i","length","n","r","prototype","hasOwnProperty","call","enumerable","configurable","writable","key","require","TypeError","this","ReferenceError","__proto__","getPrototypeOf","state","noClamp","text","element","original","lineHeight","start","middle","end","debounced","debounce","action","create","constructor","setPrototypeOf","Component","window","addEventListener","props","clientHeight","clampLines","removeEventListener","apply","clearTimeout","setTimeout","setState","ellipsis","lines","o","defaultProps","Math","floor","innerText","slice","moveMarkers","s","max","trim","accessibility","is","l","a","indexOf","u","ref","title","createElement","default"],"mappings":"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"}